Perfect ‚Äî You want **3 exchange types inside 1 config file**:

### ‚úÖ **Direct Exchange**

### ‚úÖ **Topic Exchange**

### ‚úÖ **Fanout Exchange**

I will give you a **FULL working `RabbitMQConfig.java`** that contains:

* ‚úî All 3 exchange types
* ‚úî Queues
* ‚úî Bindings
* ‚úî Proper routing keys
* ‚úî Easy-to-understand structure
* ‚úî Clean naming
* ‚úî Production-ready

This file is **ready to use**.

---

# üü© ‚≠ê FINAL COMPLETE `RabbitMQConfig.java`

### (Direct + Topic + Fanout in One File)

```java
package com.icsquiz.config;

import org.springframework.amqp.core.*;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class RabbitMQConfig {

    /* ===========================================================
                        1Ô∏è‚É£ DIRECT EXCHANGE
       =========================================================== */

    public static final String LOGIN_DIRECT_EXCHANGE = "login_direct_exchange";

    public static final String ATTENDANCE_QUEUE = "attendance_queue"; 
    public static final String EMAIL_QUEUE = "email_queue";
    public static final String SMS_QUEUE = "sms_queue";

    @Bean
    public DirectExchange loginDirectExchange() {
        return new DirectExchange(LOGIN_DIRECT_EXCHANGE, true, false);
    }

    @Bean
    public Queue attendanceQueue() { return new Queue(ATTENDANCE_QUEUE, true); }

    @Bean
    public Queue emailQueue() { return new Queue(EMAIL_QUEUE, true); }

    @Bean
    public Queue smsQueue() { return new Queue(SMS_QUEUE, true); }

    @Bean
    public Binding bindAttendanceDirect() {
        return BindingBuilder.bind(attendanceQueue())
                .to(loginDirectExchange())
                .with("login.attendance");
    }

    @Bean
    public Binding bindEmailDirect() {
        return BindingBuilder.bind(emailQueue())
                .to(loginDirectExchange())
                .with("login.email");
    }

    @Bean
    public Binding bindSmsDirect() {
        return BindingBuilder.bind(smsQueue())
                .to(loginDirectExchange())
                .with("login.sms");
    }



    /* ===========================================================
                        2Ô∏è‚É£ TOPIC EXCHANGE
       =========================================================== */

    public static final String QUIZ_TOPIC_EXCHANGE = "quiz_topic_exchange";

    public static final String QUIZ_DB_QUEUE = "quiz_db_queue";
    public static final String QUIZ_REDIS_QUEUE = "quiz_redis_queue";
    public static final String QUIZ_RANK_QUEUE = "quiz_rank_queue";
    public static final String QUIZ_ALL_QUEUE = "quiz_all_queue";

    @Bean
    public TopicExchange quizTopicExchange() {
        return new TopicExchange(QUIZ_TOPIC_EXCHANGE, true, false);
    }

    @Bean
    public Queue quizDbQueue() { return new Queue(QUIZ_DB_QUEUE, true); }

    @Bean
    public Queue quizRedisQueue() { return new Queue(QUIZ_REDIS_QUEUE, true); }

    @Bean
    public Queue quizRankQueue() { return new Queue(QUIZ_RANK_QUEUE, true); }

    @Bean
    public Queue quizAllQueue() { return new Queue(QUIZ_ALL_QUEUE, true); }

    // Exact match
    @Bean
    public Binding bindQuizDb() {
        return BindingBuilder.bind(quizDbQueue())
                .to(quizTopicExchange())
                .with("quiz.submission.db");
    }

    @Bean
    public Binding bindQuizRedis() {
        return BindingBuilder.bind(quizRedisQueue())
                .to(quizTopicExchange())
                .with("quiz.submission.redis");
    }

    @Bean
    public Binding bindQuizRank() {
        return BindingBuilder.bind(quizRankQueue())
                .to(quizTopicExchange())
                .with("quiz.submission.rank");
    }

    // Pattern match: receives ALL quiz events (quiz.* or quiz.#)
    @Bean
    public Binding bindQuizAll() {
        return BindingBuilder.bind(quizAllQueue())
                .to(quizTopicExchange())
                .with("quiz.#");
    }



    /* ===========================================================
                        3Ô∏è‚É£ FANOUT EXCHANGE
       =========================================================== */

    public static final String BROADCAST_EXCHANGE = "broadcast_exchange";

    public static final String BROADCAST_Q1 = "broadcast_q1";
    public static final String BROADCAST_Q2 = "broadcast_q2";

    @Bean
    public FanoutExchange broadcastExchange() {
        return new FanoutExchange(BROADCAST_EXCHANGE, true, false);
    }

    @Bean
    public Queue broadcastQueue1() { return new Queue(BROADCAST_Q1, true); }

    @Bean
    public Queue broadcastQueue2() { return new Queue(BROADCAST_Q2, true); }

    @Bean
    public Binding bindBroadcast1() {
        return BindingBuilder.bind(broadcastQueue1())
                .to(broadcastExchange());
    }

    @Bean
    public Binding bindBroadcast2() {
        return BindingBuilder.bind(broadcastQueue2())
                .to(broadcastExchange());
    }
}
```

---

# üü¶ ‚≠ê Explanation (Simple & Clear)

## 1Ô∏è‚É£ **Direct Exchange ‚Üí EXACT Routing**

```
routing_key == binding_key
```

| Routing Key      | Queue            |
| ---------------- | ---------------- |
| login.attendance | attendance_queue |
| login.email      | email_queue      |
| login.sms        | sms_queue        |

Perfect for **attendance, email, sms**.

---

## 2Ô∏è‚É£ **Topic Exchange ‚Üí PATTERN Routing (`*`, `#`)**

### ‚úî Exact matching:

```
quiz.submission.db ‚Üí quiz_db_queue
```

### ‚úî Wildcard matching:

```
quiz.# ‚Üí quiz_all_queue
```

This queue receives:

```
quiz.submission.db
quiz.submission.rank
quiz.results.daily
quiz.analytics.user.report
```

Perfect for **quiz submission events**.

---

## 3Ô∏è‚É£ **Fanout Exchange ‚Üí BROADCAST**

Every queue bound to it receives the message.

Perfect for:

* Global announcement
* Exam start notification
* System broadcast

---

# üü© Summary Table

| Exchange   | Purpose                  | Best for                      |
| ---------- | ------------------------ | ----------------------------- |
| **Direct** | Exact match              | login attendance, email, sms  |
| **Topic**  | Pattern match (`*`, `#`) | quiz submission flows         |
| **Fanout** | Broadcast                | announcement, live exam start |

---

# üü¶ NEXT (Choose One):

### ‚úî Generate Producer code for all 3 exchanges

### ‚úî Generate Consumer code

### ‚úî Create controller to test routing

### ‚úî Draw complete architecture diagram

### ‚úî Convert this system into microservices (Login Service, Quiz Service, Notification Service)

Just tell me:

üëâ **‚ÄúGive producer + consumer code‚Äù**
or
üëâ **‚ÄúGive full architecture diagram‚Äù**
