Below is a **clean, complete, developer-ready documentation** for:

âœ… Installing RabbitMQ in **WSL (Ubuntu on Windows)**
âœ… Enabling Management UI
âœ… Creating an admin user
âœ… Removing the default guest user
âœ… Fixing localhost & 127.0.0.1 access issue
âœ… RabbitMQ service commands & troubleshooting

You can use this as **project documentation, README, or personal notes**.

---

# ğŸ“˜ **RabbitMQ Installation & Configuration Guide (WSL â€“ Ubuntu on Windows)**

**Version:** 1.0
**Platform:** Windows 10/11 + WSL2 (Ubuntu)
**Service:** RabbitMQ + Erlang
**Last Updated:** Today

---

# 1ï¸âƒ£ **Install RabbitMQ on WSL (Ubuntu)**

RabbitMQ needs **Erlang**. Install both from the RabbitMQ package repository.

---

## **Step 1: Install Required Dependencies**

```bash
sudo apt update
sudo apt install curl gnupg apt-transport-https -y
```

---

## **Step 2: Add Erlang Repository**

```bash
curl -1sLf https://packages.erlang-solutions.com/ubuntu/erlang_solutions.asc | sudo apt-key add -
echo "deb https://packages.erlang-solutions.com/ubuntu $(lsb_release -sc) contrib" | sudo tee /etc/apt/sources.list.d/erlang_solutions.list
```

Install Erlang:

```bash
sudo apt update
sudo apt install erlang-nox -y
```

---

## **Step 3: Add RabbitMQ Official Repository**

```bash
echo "deb https://dl.cloudsmith.io/public/rabbitmq/rabbitmq-erlang/deb/ubuntu $(lsb_release -sc) main" | sudo tee /etc/apt/sources.list.d/rabbitmq.list
echo "deb https://dl.cloudsmith.io/public/rabbitmq/rabbitmq-server/deb/ubuntu $(lsb_release -sc) main" | sudo tee -a /etc/apt/sources.list.d/rabbitmq.list
```

---

## **Step 4: Install RabbitMQ Server**

```bash
sudo apt update
sudo apt install rabbitmq-server -y
```

---

## **Step 5: Enable and Start RabbitMQ**

```bash
sudo systemctl enable rabbitmq-server
sudo systemctl start rabbitmq-server
```

Check status:

```bash
systemctl status rabbitmq-server
```

---

# 2ï¸âƒ£ **Enable RabbitMQ Management UI**

RabbitMQ provides a built-in web dashboard at port **15672**.

Enable it:

```bash
sudo rabbitmq-plugins enable rabbitmq_management
```

Restart (optional):

```bash
sudo systemctl restart rabbitmq-server
```

Access dashboard:

ğŸ‘‰ [http://localhost:15672](http://localhost:15672)
ğŸ‘‰ [http://127.0.0.1:15672](http://127.0.0.1:15672)

Default login (if guest exists):

```
guest / guest
```

---

# 3ï¸âƒ£ **Create a New Admin User**

### **Step 1 â€” Add user**

```bash
sudo rabbitmqctl add_user admin admin123
```

### **Step 2 â€” Set admin role**

```bash
sudo rabbitmqctl set_user_tags admin administrator
```

### **Step 3 â€” Give full permissions**

```bash
sudo rabbitmqctl set_permissions -p / admin ".*" ".*" ".*"
```

---

# 4ï¸âƒ£ **Remove Default Guest User (Recommended for Security)**

```bash
sudo rabbitmqctl delete_user guest
```

Verify:

```bash
sudo rabbitmqctl list_users
```

Expected:

```
admin   [administrator]
```

---

# 5ï¸âƒ£ **Fix Login Issue: localhost Not Working in WSL**

### Problem:

* `http://127.0.0.1:15672` â†’ Works
* `http://localhost:15672` â†’ Fails
  Reason: WSL `/etc/hosts` missing localhost mapping for IPv6.

---

## âœ¨ **Fix the Hosts File**

Open file:

```bash
sudo nano /etc/hosts
```

Update to:

```
127.0.0.1   localhost
127.0.1.1   DESKTOP-PTTGD06        DESKTOP-PTTGD06

::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
```

Save â†’ Exit:

* CTRL+O
* ENTER
* CTRL+X

---

## Restart WSL (important)

Run in Windows PowerShell / CMD:

```bash
wsl --shutdown
```

Then reopen Ubuntu.

Now both work:

âœ” [http://localhost:15672](http://localhost:15672)
âœ” [http://127.0.0.1:15672](http://127.0.0.1:15672)

---

# 6ï¸âƒ£ **RabbitMQ Useful Commands**

### **Check users**

```bash
sudo rabbitmqctl list_users
```

### **List permissions**

```bash
sudo rabbitmqctl list_permissions -p /
```

### **Reset a user password**

```bash
sudo rabbitmqctl change_password admin NEW_PASSWORD
```

### **Check all queues**

```bash
sudo rabbitmqctl list_queues
```

### **Restart service**

```bash
sudo systemctl restart rabbitmq-server
```

---

# 7ï¸âƒ£ **Troubleshooting**

### âŒ RabbitMQ failed to start

Check logs:

```bash
sudo journalctl -xeu rabbitmq-server
```

### âŒ Login fails but user exists

Fix permissions:

```bash
sudo rabbitmqctl set_permissions -p / admin ".*" ".*" ".*"
sudo rabbitmqctl set_user_tags admin administrator
```

### âŒ Cannot access localhost

Fix `/etc/hosts` (Section 5).

---

# âœ… Final Result

You now have:

âœ” RabbitMQ installed
âœ” Management UI enabled
âœ” Secure admin user created
âœ” Default guest user removed
âœ” Localhost & 127.0.0.1 both working
âœ” WSL network correctly configured

---

If you want next:

ğŸ”¹ **RabbitMQ + Spring Boot configuration**
ğŸ”¹ **RabbitTemplate + Listener setup**
ğŸ”¹ **Retry / DLQ setup**
ğŸ”¹ **Exchange â†’ Queue â†’ Binding diagram**
ğŸ”¹ **Dockerfile + Docker Compose version**

Just tell me â€” Iâ€™ll prepare full documentation for that too.
